<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1313px" preserveAspectRatio="none" style="width:1496px;height:1313px;" version="1.1" viewBox="0 0 1496 1313" width="1496px" zoomAndPan="magnify"><defs><filter height="300%" id="f1op6sv53h026m" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1op6sv53h026m)" height="581.8594" style="stroke: #000000; stroke-width: 2.0;" width="1043.5" x="431" y="468.0234"/><rect fill="#FFFFFF" filter="url(#f1op6sv53h026m)" height="506.4609" style="stroke: #000000; stroke-width: 2.0;" width="908" x="441" y="536.4219"/><rect fill="#FFFFFF" filter="url(#f1op6sv53h026m)" height="401.9297" style="stroke: #000000; stroke-width: 2.0;" width="762" x="451" y="633.9531"/><rect fill="#FFFFFF" filter="url(#f1op6sv53h026m)" height="208.8672" style="stroke: #000000; stroke-width: 2.0;" width="684.5" x="461" y="820.0156"/><rect fill="#FFFFFF" filter="url(#f1op6sv53h026m)" height="120.4688" style="stroke: #000000; stroke-width: 2.0;" width="521.5" x="471" y="901.4141"/><rect fill="#FFFFFF" height="59.0703" style="stroke: none; stroke-width: 1.0;" width="521.5" x="471" y="962.8125"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="31" x2="31" y1="86.2969" y2="1226.5469"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="209" x2="209" y1="86.2969" y2="1226.5469"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="406" x2="406" y1="86.2969" y2="1226.5469"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="549" x2="549" y1="86.2969" y2="1226.5469"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="699" x2="699" y1="86.2969" y2="1226.5469"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="920.5" x2="920.5" y1="86.2969" y2="1226.5469"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1158" x2="1158" y1="86.2969" y2="1226.5469"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1276" x2="1276" y1="86.2969" y2="1226.5469"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1441.5" x2="1441.5" y1="86.2969" y2="1226.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="41" x="8" y="82.9951">Patron</text><ellipse cx="31.5" cy="13" fill="#FEFECE" filter="url(#f1op6sv53h026m)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M31.5,21 L31.5,48 M18.5,29 L44.5,29 M31.5,48 L18.5,63 M31.5,48 L44.5,63 " fill="none" filter="url(#f1op6sv53h026m)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="41" x="8" y="1238.542">Patron</text><ellipse cx="31.5" cy="1251.8438" fill="#FEFECE" filter="url(#f1op6sv53h026m)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M31.5,1259.8438 L31.5,1286.8438 M18.5,1267.8438 L44.5,1267.8438 M31.5,1286.8438 L18.5,1301.8438 M31.5,1286.8438 L44.5,1301.8438 " fill="none" filter="url(#f1op6sv53h026m)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="97" x="158" y="82.9951">Biblioteket app</text><path d="M189,42 L189,66 M189,54 L206,54 " fill="none" filter="url(#f1op6sv53h026m)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="218" cy="54" fill="#FEFECE" filter="url(#f1op6sv53h026m)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="97" x="158" y="1238.542">Biblioteket app</text><path d="M189,1245.8438 L189,1269.8438 M189,1257.8438 L206,1257.8438 " fill="none" filter="url(#f1op6sv53h026m)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="218" cy="1257.8438" fill="#FEFECE" filter="url(#f1op6sv53h026m)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#f1op6sv53h026m)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="121" x="346" y="47"/><rect fill="#FEFECE" filter="url(#f1op6sv53h026m)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="121" x="342" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="349" y="70.9951">Adgangsplatform</text><rect fill="#FEFECE" filter="url(#f1op6sv53h026m)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="121" x="346" y="1225.5469"/><rect fill="#FEFECE" filter="url(#f1op6sv53h026m)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="121" x="342" y="1229.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="349" y="1249.542">Adgangsplatform</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="130" x="481" y="82.9951">Loan History service</text><path d="M528.5,42 L528.5,66 M528.5,54 L545.5,54 " fill="none" filter="url(#f1op6sv53h026m)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="557.5" cy="54" fill="#FEFECE" filter="url(#f1op6sv53h026m)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="130" x="481" y="1238.542">Loan History service</text><path d="M528.5,1245.8438 L528.5,1269.8438 M528.5,1257.8438 L545.5,1257.8438 " fill="none" filter="url(#f1op6sv53h026m)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="557.5" cy="1257.8438" fill="#FEFECE" filter="url(#f1op6sv53h026m)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="139" x="627" y="82.9951">Patron Accept service</text><path d="M679,42 L679,66 M679,54 L696,54 " fill="none" filter="url(#f1op6sv53h026m)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="708" cy="54" fill="#FEFECE" filter="url(#f1op6sv53h026m)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="139" x="627" y="1238.542">Patron Accept service</text><path d="M679,1245.8438 L679,1269.8438 M679,1257.8438 L696,1257.8438 " fill="none" filter="url(#f1op6sv53h026m)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="708" cy="1257.8438" fill="#FEFECE" filter="url(#f1op6sv53h026m)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="118" x="858.5" y="82.9951">Data Wash service</text><path d="M900,42 L900,66 M900,54 L917,54 " fill="none" filter="url(#f1op6sv53h026m)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="929" cy="54" fill="#FEFECE" filter="url(#f1op6sv53h026m)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="118" x="858.5" y="1238.542">Data Wash service</text><path d="M900,1245.8438 L900,1269.8438 M900,1257.8438 L917,1257.8438 " fill="none" filter="url(#f1op6sv53h026m)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="929" cy="1257.8438" fill="#FEFECE" filter="url(#f1op6sv53h026m)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="1114" y="82.9951">CULR service</text><path d="M1138,42 L1138,66 M1138,54 L1155,54 " fill="none" filter="url(#f1op6sv53h026m)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="1167" cy="54" fill="#FEFECE" filter="url(#f1op6sv53h026m)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="1114" y="1238.542">CULR service</text><path d="M1138,1245.8438 L1138,1269.8438 M1138,1257.8438 L1155,1257.8438 " fill="none" filter="url(#f1op6sv53h026m)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="1167" cy="1257.8438" fill="#FEFECE" filter="url(#f1op6sv53h026m)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#f1op6sv53h026m)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="118" x="1217" y="47"/><rect fill="#FEFECE" filter="url(#f1op6sv53h026m)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="118" x="1213" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="104" x="1220" y="70.9951">Service Platform</text><rect fill="#FEFECE" filter="url(#f1op6sv53h026m)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="118" x="1217" y="1225.5469"/><rect fill="#FEFECE" filter="url(#f1op6sv53h026m)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="118" x="1213" y="1229.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="104" x="1220" y="1249.542">Service Platform</text><rect fill="#FEFECE" filter="url(#f1op6sv53h026m)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="37" x="1423.5" y="47"/><rect fill="#FEFECE" filter="url(#f1op6sv53h026m)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="37" x="1419.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="23" x="1426.5" y="70.9951">FBS</text><rect fill="#FEFECE" filter="url(#f1op6sv53h026m)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="37" x="1423.5" y="1225.5469"/><rect fill="#FEFECE" filter="url(#f1op6sv53h026m)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="37" x="1419.5" y="1229.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="23" x="1426.5" y="1249.542">FBS</text><rect fill="#EEEEEE" filter="url(#f1op6sv53h026m)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1481.5" x="3" y="116.8633"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1484.5" y1="116.8633" y2="116.8633"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1484.5" y1="119.8633" y2="119.8633"/><rect fill="#EEEEEE" filter="url(#f1op6sv53h026m)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="298" x="594.75" y="106.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="281" x="600.75" y="122.3638">Låner accepterer opsamling af lånehistorik.</text><polygon fill="#A80036" points="197.5,156.5625,207.5,160.5625,197.5,164.5625,201.5,160.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="31.5" x2="203.5" y1="160.5625" y2="160.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="38.5" y="155.4966">Log ind.</text><polygon fill="#A80036" points="394.5,185.6953,404.5,189.6953,394.5,193.6953,398.5,189.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="209.5" x2="400.5" y1="189.6953" y2="189.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="216.5" y="184.6294">Authentificer låner.</text><polygon fill="#A80036" points="220.5,214.8281,210.5,218.8281,220.5,222.8281,216.5,218.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="214.5" x2="405.5" y1="218.8281" y2="218.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="173" x="226.5" y="213.7622">Logget ind (GUID + PatronID).</text><polygon fill="#A80036" points="42.5,259.0938,32.5,263.0938,42.5,267.0938,38.5,263.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="36.5" x2="208.5" y1="263.0938" y2="263.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="76" x="48.5" y="242.895">Prompt for ja</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="151" x="51.5" y="258.0278">til at opsamle lånehistorik.</text><polygon fill="#A80036" points="197.5,303.3594,207.5,307.3594,197.5,311.3594,201.5,307.3594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="31.5" x2="203.5" y1="307.3594" y2="307.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="53" x="38.5" y="287.1606">Accept af</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="131" x="41.5" y="302.2935">at gemme lånehistorik.</text><polygon fill="#A80036" points="687.5,332.4922,697.5,336.4922,687.5,340.4922,691.5,336.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="209.5" x2="693.5" y1="336.4922" y2="336.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150" x="216.5" y="331.4263">Gem Låner accept (GUID).</text><polygon fill="#A80036" points="220.5,361.625,210.5,365.625,220.5,369.625,216.5,365.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="214.5" x2="698.5" y1="365.625" y2="365.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="226.5" y="360.5591">Låner accept gemt.</text><polygon fill="#A80036" points="42.5,405.8906,32.5,409.8906,42.5,413.8906,38.5,409.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="36.5" x2="208.5" y1="409.8906" y2="409.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="48.5" y="389.6919">Vis feedback</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="51.5" y="404.8247">til låneren.</text><rect fill="#EEEEEE" filter="url(#f1op6sv53h026m)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1481.5" x="3" y="438.457"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1484.5" y1="438.457" y2="438.457"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1484.5" y1="441.457" y2="441.457"/><rect fill="#EEEEEE" filter="url(#f1op6sv53h026m)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="440" x="523.75" y="427.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="423" x="529.75" y="443.9575">Løbende opsamling af lånehistorik for lånere der har givet accept.</text><path d="M431,468.0234 L504,468.0234 L504,475.0234 L494,485.0234 L431,485.0234 L431,468.0234 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="581.8594" style="stroke: #000000; stroke-width: 2.0;" width="1043.5" x="431" y="468.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="446" y="481.0903">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="425" x="519" y="480.2339">[Daglig eksport af lånehistorik fra FBS til Service Platform dueslag (CPR + PID)..]</text><polygon fill="#A80036" points="1287,517.4219,1277,521.4219,1287,525.4219,1283,521.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1281" x2="1441" y1="521.4219" y2="521.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="1293" y="501.2231">Send daglig lånehistorik</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="130" x="1296" y="516.356">til dueslag (CPR + PID).</text><path d="M441,536.4219 L514,536.4219 L514,543.4219 L504,553.4219 L441,553.4219 L441,536.4219 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="506.4609" style="stroke: #000000; stroke-width: 2.0;" width="908" x="441" y="536.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="456" y="549.4888">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="455" x="529" y="548.6323">[Daglig  hentning af Lånehistorik fra Service Platform dueslag til Data Wash servicen.]</text><polygon fill="#A80036" points="1264,585.8203,1274,589.8203,1264,593.8203,1268,589.8203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="920.5" x2="1270" y1="589.8203" y2="589.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="927.5" y="569.6216">Hent dagligt data dump</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="153" x="930.5" y="584.7544">af lånehistorik (CPR + PID).</text><polygon fill="#A80036" points="931.5,614.9531,921.5,618.9531,931.5,622.9531,927.5,618.9531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="925.5" x2="1275" y1="618.9531" y2="618.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="190" x="937.5" y="613.8872">Returnér data dump (CPR + PID).</text><path d="M451,633.9531 L524,633.9531 L524,640.9531 L514,650.9531 L451,650.9531 L451,633.9531 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="401.9297" style="stroke: #000000; stroke-width: 2.0;" width="762" x="451" y="633.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="466" y="647.02">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="205" x="539" y="646.1636">[Hent alle lånere der har givet accept.]</text><polygon fill="#A80036" points="710.5,698.4844,700.5,702.4844,710.5,706.4844,706.5,702.4844" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="704.5" x2="919.5" y1="702.4844" y2="702.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="716.5" y="667.1528">Hent alle lånere</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="114" x="719.5" y="682.2856">der har givet accept</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="194" x="719.5" y="697.4185">til at opsamle lånehistorik (GUID).</text><polygon fill="#A80036" points="908.5,727.6172,918.5,731.6172,908.5,735.6172,912.5,731.6172" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="699.5" x2="914.5" y1="731.6172" y2="731.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="706.5" y="726.5513">Returnér lånere (GUID).</text><polygon fill="#A80036" points="1146.5,771.8828,1156.5,775.8828,1146.5,779.8828,1150.5,775.8828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="920.5" x2="1152.5" y1="775.8828" y2="775.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="211" x="927.5" y="755.6841">Foretage opslag med lånerens GUID</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="127" x="930.5" y="770.8169">og hent CPR nummer.</text><polygon fill="#A80036" points="931.5,801.0156,921.5,805.0156,931.5,809.0156,927.5,805.0156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="925.5" x2="1157.5" y1="805.0156" y2="805.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="937.5" y="799.9497">Returnér CPR nummer.</text><path d="M461,820.0156 L534,820.0156 L534,827.0156 L524,837.0156 L461,837.0156 L461,820.0156 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="208.8672" style="stroke: #000000; stroke-width: 2.0;" width="684.5" x="461" y="820.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="476" y="833.0825">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="329" x="549" y="832.2261">[Opdatér lånehistorikken for hver låner der har givet accept.]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="920.5" x2="962.5" y1="873.4141" y2="873.4141"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="962.5" x2="962.5" y1="873.4141" y2="886.4141"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="921.5" x2="962.5" y1="886.4141" y2="886.4141"/><polygon fill="#A80036" points="931.5,882.4141,921.5,886.4141,931.5,890.4141,927.5,886.4141" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="114" x="927.5" y="853.2153">Udtræk lånehistorik</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="203" x="930.5" y="868.3481">for hver låner (CPR nummer + PID).</text><path d="M471,901.4141 L534,901.4141 L534,908.4141 L524,918.4141 L471,918.4141 L471,901.4141 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="120.4688" style="stroke: #000000; stroke-width: 2.0;" width="521.5" x="471" y="901.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="486" y="914.481">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="232" x="549" y="913.6245">[Låneren findes ikke i Loan History service.]</text><polygon fill="#A80036" points="560,950.8125,550,954.8125,560,958.8125,556,954.8125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="554" x2="919.5" y1="954.8125" y2="954.8125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="67" x="566" y="934.6138">Opret låner</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="201" x="569" y="949.7466">og tilføje lånehistorik (GUID + PID).</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="471" x2="992.5" y1="963.8125" y2="963.8125"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="253" x="476" y="974.0229">[Låneren findes allerede i Loan History service.]</text><polygon fill="#A80036" points="560,1009.8828,550,1013.8828,560,1017.8828,556,1013.8828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="554" x2="919.5" y1="1013.8828" y2="1013.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="566" y="993.6841">Tilføje lånehistorik</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="569" y="1008.8169">for hver låner (GUID + PID).</text><rect fill="#EEEEEE" filter="url(#f1op6sv53h026m)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1481.5" x="3" y="1077.4492"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1484.5" y1="1077.4492" y2="1077.4492"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1484.5" y1="1080.4492" y2="1080.4492"/><rect fill="#EEEEEE" filter="url(#f1op6sv53h026m)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="328" x="579.75" y="1066.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="311" x="585.75" y="1082.9497">Låner får vist lånehistorik i brugergrænsefladen.</text><polygon fill="#A80036" points="197.5,1117.1484,207.5,1121.1484,197.5,1125.1484,201.5,1121.1484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="31.5" x2="203.5" y1="1121.1484" y2="1121.1484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="131" x="38.5" y="1116.0825">Åben lånehistorik liste.</text><polygon fill="#A80036" points="537,1146.2813,547,1150.2813,537,1154.2813,541,1150.2813" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="209.5" x2="543" y1="1150.2813" y2="1150.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="216.5" y="1145.2153">Hent lånehistorik (GUID).</text><polygon fill="#A80036" points="220.5,1175.4141,210.5,1179.4141,220.5,1183.4141,216.5,1179.4141" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="214.5" x2="548" y1="1179.4141" y2="1179.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="226.5" y="1174.3481">Returnér lånehistorik (PID)</text><polygon fill="#A80036" points="42.5,1204.5469,32.5,1208.5469,42.5,1212.5469,38.5,1208.5469" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="36.5" x2="208.5" y1="1208.5469" y2="1208.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="48.5" y="1203.481">Vis lånehistorik liste.</text><!--MD5=[7727df1a14196b56eeef084fe30fff63]
@startuml

actor "Patron"
boundary "Biblioteket app"
collections "Adgangsplatform"
boundary "Loan History service"
boundary "Patron Accept service"
boundary "Data Wash service"
boundary "CULR service"
collections "Service Platform"
collections "FBS"

== Låner accepterer opsamling af lånehistorik. ==

    "Patron"->"Biblioteket app": Log ind.
    "Biblioteket app"->"Adgangsplatform": Authentificer låner.
    "Adgangsplatform"->"Biblioteket app": Logget ind (GUID + PatronID).
    "Biblioteket app"->"Patron": Prompt for ja \n til at opsamle lånehistorik.
    "Patron"->"Biblioteket app": Accept af \n at gemme lånehistorik.
    "Biblioteket app"->"Patron Accept service": Gem Låner accept (GUID).
    "Patron Accept service"->"Biblioteket app": Låner accept gemt.
    "Biblioteket app"->"Patron": Vis feedback \n til låneren.

== Løbende opsamling af lånehistorik for lånere der har givet accept. ==

    loop Daglig eksport af lånehistorik fra FBS til Service Platform dueslag (CPR + PID)..
        "FBS"->"Service Platform": Send daglig lånehistorik \n til dueslag (CPR + PID).
        loop Daglig  hentning af Lånehistorik fra Service Platform dueslag til Data Wash servicen.
            "Data Wash service"->"Service Platform": Hent dagligt data dump \n af lånehistorik (CPR + PID).
            "Service Platform"->"Data Wash service": Returnér data dump (CPR + PID). 
            loop Hent alle lånere der har givet accept.
                "Data Wash service"->"Patron Accept service": Hent alle lånere \n der har givet accept \n til at opsamle lånehistorik (GUID).
                "Patron Accept service"->"Data Wash service": Returnér lånere (GUID).
                "Data Wash service"->"CULR service": Foretage opslag med lånerens GUID \n og hent CPR nummer.
                "CULR service"->"Data Wash service": Returnér CPR nummer.
                loop Opdatér lånehistorikken for hver låner der har givet accept.
                    "Data Wash service"->"Data Wash service": Udtræk lånehistorik \n for hver låner (CPR nummer + PID).
                    alt Låneren findes ikke i Loan History service.
                        "Data Wash service"->"Loan History service": Opret låner \n og tilføje lånehistorik (GUID + PID).
                        else Låneren findes allerede i Loan History service.
                        "Data Wash service"->"Loan History service": Tilføje lånehistorik \n for hver låner (GUID + PID).
                    end
                end
            end
        end
        
    end
    
== Låner får vist lånehistorik i brugergrænsefladen. ==

    Patron->"Biblioteket app": Åben lånehistorik liste.
    "Biblioteket app"->"Loan History service": Hent lånehistorik (GUID).
    "Loan History service"->"Biblioteket app": Returnér lånehistorik (PID)
    "Biblioteket app"->"Patron": Vis lånehistorik liste.
    
@enduml

PlantUML version 1.2019.13(Tue Dec 10 17:18:29 GMT 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_202-b08
Operating System: Linux
Default Encoding: ANSI_X3.4-1968
Language: en
Country: US
--></g></svg>