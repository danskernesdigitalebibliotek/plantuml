<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="712px" preserveAspectRatio="none" style="width:787px;height:712px;" version="1.1" viewBox="0 0 787 712" width="787px" zoomAndPan="magnify"><defs><filter height="300%" id="f1rkvh3y4tjno2" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="287" x="246.75" y="43.3486">Login DFD - Sequence Diagram</text><rect fill="#FFFFFF" filter="url(#f1rkvh3y4tjno2)" height="308.4609" style="stroke: #000000; stroke-width: 2.0;" width="638.5" x="10" y="154.8906"/><rect fill="#FFFFFF" filter="url(#f1rkvh3y4tjno2)" height="133.6641" style="stroke: #000000; stroke-width: 2.0;" width="687" x="83.5" y="477.3516"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="47" x2="47" y1="137.8906" y2="628.0156"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="117.5" x2="117.5" y1="137.8906" y2="628.0156"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="508.5" x2="508.5" y1="137.8906" y2="628.0156"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="608.5" x2="608.5" y1="137.8906" y2="628.0156"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="674.5" x2="674.5" y1="137.8906" y2="628.0156"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="735.5" x2="735.5" y1="137.8906" y2="628.0156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="20" y="134.5889">Patron</text><ellipse cx="47" cy="64.5938" fill="#FEFECE" filter="url(#f1rkvh3y4tjno2)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M47,72.5938 L47,99.5938 M34,80.5938 L60,80.5938 M47,99.5938 L34,114.5938 M47,99.5938 L60,114.5938 " fill="none" filter="url(#f1rkvh3y4tjno2)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="20" y="640.0107">Patron</text><ellipse cx="47" cy="653.3125" fill="#FEFECE" filter="url(#f1rkvh3y4tjno2)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M47,661.3125 L47,688.3125 M34,669.3125 L60,669.3125 M47,688.3125 L34,703.3125 M47,688.3125 L60,703.3125 " fill="none" filter="url(#f1rkvh3y4tjno2)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="99.5" y="134.5889">CMS</text><path d="M97.5,93.5938 L97.5,117.5938 M97.5,105.5938 L114.5,105.5938 " fill="none" filter="url(#f1rkvh3y4tjno2)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="126.5" cy="105.5938" fill="#FEFECE" filter="url(#f1rkvh3y4tjno2)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="99.5" y="640.0107">CMS</text><path d="M97.5,647.3125 L97.5,671.3125 M97.5,659.3125 L114.5,659.3125 " fill="none" filter="url(#f1rkvh3y4tjno2)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="126.5" cy="659.3125" fill="#FEFECE" filter="url(#f1rkvh3y4tjno2)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="113" x="449.5" y="134.5889">Accessplatform</text><path d="M488.5,93.5938 L488.5,117.5938 M488.5,105.5938 L505.5,105.5938 " fill="none" filter="url(#f1rkvh3y4tjno2)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="517.5" cy="105.5938" fill="#FEFECE" filter="url(#f1rkvh3y4tjno2)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="113" x="449.5" y="640.0107">Accessplatform</text><path d="M488.5,647.3125 L488.5,671.3125 M488.5,659.3125 L505.5,659.3125 " fill="none" filter="url(#f1rkvh3y4tjno2)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="517.5" cy="659.3125" fill="#FEFECE" filter="url(#f1rkvh3y4tjno2)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="54" x="578.5" y="134.5889">Session</text><path d="M590.5,85.5938 C590.5,75.5938 608.5,75.5938 608.5,75.5938 C608.5,75.5938 626.5,75.5938 626.5,85.5938 L626.5,111.5938 C626.5,121.5938 608.5,121.5938 608.5,121.5938 C608.5,121.5938 590.5,121.5938 590.5,111.5938 L590.5,85.5938 " fill="#FEFECE" filter="url(#f1rkvh3y4tjno2)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M590.5,85.5938 C590.5,95.5938 608.5,95.5938 608.5,95.5938 C608.5,95.5938 626.5,95.5938 626.5,85.5938 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="54" x="578.5" y="640.0107">Session</text><path d="M590.5,653.3125 C590.5,643.3125 608.5,643.3125 608.5,643.3125 C608.5,643.3125 626.5,643.3125 626.5,653.3125 L626.5,679.3125 C626.5,689.3125 608.5,689.3125 608.5,689.3125 C608.5,689.3125 590.5,689.3125 590.5,679.3125 L590.5,653.3125 " fill="#FEFECE" filter="url(#f1rkvh3y4tjno2)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M590.5,653.3125 C590.5,663.3125 608.5,663.3125 608.5,663.3125 C608.5,663.3125 626.5,663.3125 626.5,653.3125 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="47" x="648.5" y="134.5889">Drupal</text><path d="M657,85.5938 C657,75.5938 675,75.5938 675,75.5938 C675,75.5938 693,75.5938 693,85.5938 L693,111.5938 C693,121.5938 675,121.5938 675,121.5938 C675,121.5938 657,121.5938 657,111.5938 L657,85.5938 " fill="#FEFECE" filter="url(#f1rkvh3y4tjno2)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M657,85.5938 C657,95.5938 675,95.5938 675,95.5938 C675,95.5938 693,95.5938 693,85.5938 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="47" x="648.5" y="640.0107">Drupal</text><path d="M657,653.3125 C657,643.3125 675,643.3125 675,643.3125 C675,643.3125 693,643.3125 693,653.3125 L693,679.3125 C693,689.3125 675,689.3125 675,689.3125 C675,689.3125 657,689.3125 657,679.3125 L657,653.3125 " fill="#FEFECE" filter="url(#f1rkvh3y4tjno2)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M657,653.3125 C657,663.3125 675,663.3125 675,663.3125 C675,663.3125 693,663.3125 693,653.3125 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="29" x="718.5" y="134.5889">LMS</text><path d="M715.5,93.5938 L715.5,117.5938 M715.5,105.5938 L732.5,105.5938 " fill="none" filter="url(#f1rkvh3y4tjno2)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="744.5" cy="105.5938" fill="#FEFECE" filter="url(#f1rkvh3y4tjno2)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="29" x="718.5" y="640.0107">LMS</text><path d="M715.5,647.3125 L715.5,671.3125 M715.5,659.3125 L732.5,659.3125 " fill="none" filter="url(#f1rkvh3y4tjno2)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="744.5" cy="659.3125" fill="#FEFECE" filter="url(#f1rkvh3y4tjno2)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M10,154.8906 L135,154.8906 L135,161.8906 L125,171.8906 L10,171.8906 L10,154.8906 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="308.4609" style="stroke: #000000; stroke-width: 2.0;" width="638.5" x="10" y="154.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="80" x="25" y="167.9575">Basic login</text><polygon fill="#A80036" points="106,189.1563,116,193.1563,106,197.1563,110,193.1563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="47" x2="112" y1="193.1563" y2="193.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="54" y="188.0903">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="34" x="67" y="188.0903">Login</text><polygon fill="#A80036" points="497,218.2891,507,222.2891,497,226.2891,501,222.2891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="118" x2="503" y1="222.2891" y2="222.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="125" y="217.2231">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="177" x="138" y="217.2231">Elevated Client Id + Agency</text><polygon fill="#A80036" points="58,247.4219,48,251.4219,58,255.4219,54,251.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="52" x2="508" y1="251.4219" y2="251.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="8" x="64" y="246.356">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="34" x="76" y="246.356">Login</text><polygon fill="#A80036" points="497,276.5547,507,280.5547,497,284.5547,501,280.5547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="47" x2="503" y1="280.5547" y2="280.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="54" y="275.4888">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="67" y="275.4888">id + pin</text><polygon fill="#A80036" points="129,305.6875,119,309.6875,129,313.6875,125,309.6875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="123" x2="508" y1="309.6875" y2="309.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="135" y="304.6216">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="148" y="304.6216">Authorization code</text><polygon fill="#A80036" points="497,334.8203,507,338.8203,497,342.8203,501,338.8203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="118" x2="503" y1="338.8203" y2="338.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="125" y="333.7544">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="302" x="138" y="333.7544">Authorization code + Client Id and Client Secret</text><polygon fill="#A80036" points="129,363.9531,119,367.9531,129,371.9531,125,367.9531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="123" x2="508" y1="367.9531" y2="367.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="135" y="362.8872">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="148" y="362.8872">Access token</text><polygon fill="#A80036" points="497,393.0859,507,397.0859,497,401.0859,501,397.0859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="118" x2="503" y1="397.0859" y2="397.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="125" y="392.02">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="354" x="138" y="392.02">Normal Client Id and Client Secret, userid + pin, Agency</text><polygon fill="#A80036" points="129,422.2188,119,426.2188,129,430.2188,125,426.2188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="123" x2="508" y1="426.2188" y2="426.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="135" y="421.1528">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="148" y="421.1528">User access token</text><polygon fill="#A80036" points="596.5,451.3516,606.5,455.3516,596.5,459.3516,600.5,455.3516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="118" x2="602.5" y1="455.3516" y2="455.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="125" y="450.2856">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="148" y="450.2856">User access token</text><path d="M83.5,477.3516 L334.5,477.3516 L334.5,484.3516 L324.5,494.3516 L83.5,494.3516 L83.5,477.3516 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="133.6641" style="stroke: #000000; stroke-width: 2.0;" width="687" x="83.5" y="477.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="206" x="98.5" y="490.4185">Get Patron Data from LMS</text><polygon fill="#A80036" points="724,511.6172,734,515.6172,724,519.6172,728,515.6172" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="118" x2="730" y1="515.6172" y2="515.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="125" y="510.5513">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="133" x="147" y="510.5513">Userid + pin, Agency</text><polygon fill="#A80036" points="129,540.75,119,544.75,129,548.75,125,544.75" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="123" x2="735" y1="544.75" y2="544.75"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="135" y="539.6841">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="157" y="539.6841">LMS Patron Data</text><polygon fill="#A80036" points="596.5,569.8828,606.5,573.8828,596.5,577.8828,600.5,573.8828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="118" x2="602.5" y1="573.8828" y2="573.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="125" y="568.8169">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="154" x="146" y="568.8169">Userid, LMS Patron Data</text><polygon fill="#A80036" points="663,599.0156,673,603.0156,663,607.0156,667,603.0156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="118" x2="669" y1="603.0156" y2="603.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="125" y="597.9497">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="377" x="147" y="597.9497">Userid (hashed), LMS Patron Data (Name, email, blockings)</text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="150" x="630.5" y="14.2822">After Simon Holt: Login DFD</text><!--MD5=[c5d5f8e7262b613576c918a54f0cca72]
@startuml
autonumber

title Login DFD - Sequence Diagram
header After Simon Holt: Login DFD

actor "Patron" as USER
boundary CMS
boundary Accessplatform as AP
'control "Shopping Cart" as SC

database "Session" as SESSION
database "Drupal" as DRUPAL
boundary LMS
'"Library\nManagemt\nSystem" as LMS

group Basic login

USER -> CMS: Login
CMS -> AP: Elevated Client Id + Agency
AP -> USER: Login
AP <- - USER: id + pin
CMS <- - AP: Authorization code

CMS -> AP: Authorization code + Client Id and Client Secret
CMS <- - AP: Access token


CMS -> AP: Normal Client Id and Client Secret, userid + pin, Agency
CMS <- - AP: User access token

CMS -> SESSION: User access token

end
'newpage Get Patron Data

group Get Patron Data from LMS

CMS -> LMS: Userid + pin, Agency
CMS <- - LMS: LMS Patron Data

CMS -> SESSION: Userid, LMS Patron Data

CMS -> DRUPAL: Userid (hashed), LMS Patron Data (Name, email, blockings)


end
@enduml

@startuml
autonumber

title Login DFD - Sequence Diagram
header After Simon Holt: Login DFD

actor "Patron" as USER
boundary CMS
boundary Accessplatform as AP

database "Session" as SESSION
database "Drupal" as DRUPAL
boundary LMS

group Basic login

USER -> CMS: Login
CMS -> AP: Elevated Client Id + Agency
AP -> USER: Login
AP <- - USER: id + pin
CMS <- - AP: Authorization code

CMS -> AP: Authorization code + Client Id and Client Secret
CMS <- - AP: Access token


CMS -> AP: Normal Client Id and Client Secret, userid + pin, Agency
CMS <- - AP: User access token

CMS -> SESSION: User access token

end

group Get Patron Data from LMS

CMS -> LMS: Userid + pin, Agency
CMS <- - LMS: LMS Patron Data

CMS -> SESSION: Userid, LMS Patron Data

CMS -> DRUPAL: Userid (hashed), LMS Patron Data (Name, email, blockings)


end
@enduml

PlantUML version 1.2020.20beta13(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>