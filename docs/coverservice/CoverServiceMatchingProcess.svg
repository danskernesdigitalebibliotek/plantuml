<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="694px" preserveAspectRatio="none" style="width:696px;height:694px;" version="1.1" viewBox="0 0 696 694" width="696px" zoomAndPan="magnify"><defs><filter height="300%" id="fem3eaols7ttu" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="319" x="189.5" y="22.9951">How to match local holding and build load file</text><rect fill="#FFFFFF" filter="url(#fem3eaols7ttu)" height="114.5313" style="stroke: #000000; stroke-width: 2.0;" width="268" x="13" y="133.5938"/><rect fill="#FFFFFF" filter="url(#fem3eaols7ttu)" height="178.7344" style="stroke: #000000; stroke-width: 2.0;" width="474" x="13" y="262.125"/><rect fill="#FFFFFF" height="88.2031" style="stroke: none; stroke-width: 1.0;" width="474" x="13" y="352.6563"/><rect fill="#FFFFFF" filter="url(#fem3eaols7ttu)" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="568" x="13" y="454.8594"/><rect fill="#FFFFFF" filter="url(#fem3eaols7ttu)" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="672" x="13" y="544.2578"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="41" x2="41" y1="116.5938" y2="607.5234"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="255" x2="255" y1="116.5938" y2="607.5234"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="324" x2="324" y1="116.5938" y2="607.5234"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="427" x2="427" y1="116.5938" y2="607.5234"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="529" x2="529" y1="116.5938" y2="607.5234"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="628" x2="628" y1="116.5938" y2="607.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="23" y="113.292">User</text><ellipse cx="41" cy="43.2969" fill="#F8F8F8" filter="url(#fem3eaols7ttu)" rx="8" ry="8" style="stroke: #383838; stroke-width: 2.0;"/><path d="M41,51.2969 L41,78.2969 M28,59.2969 L54,59.2969 M41,78.2969 L28,93.2969 M41,78.2969 L54,93.2969 " fill="none" filter="url(#fem3eaols7ttu)" style="stroke: #383838; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="23" y="619.5186">User</text><ellipse cx="41" cy="632.8203" fill="#F8F8F8" filter="url(#fem3eaols7ttu)" rx="8" ry="8" style="stroke: #383838; stroke-width: 2.0;"/><path d="M41,640.8203 L41,667.8203 M28,648.8203 L54,648.8203 M41,667.8203 L28,682.8203 M41,667.8203 L54,682.8203 " fill="none" filter="url(#fem3eaols7ttu)" style="stroke: #383838; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="23" x="240.5" y="113.292">FBS</text><ellipse cx="255" cy="84.2969" fill="#F8F8F8" filter="url(#fem3eaols7ttu)" rx="12" ry="12" style="stroke: #383838; stroke-width: 2.0;"/><line style="stroke: #383838; stroke-width: 2.0;" x1="243" x2="267" y1="98.2969" y2="98.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="23" x="240.5" y="619.5186">FBS</text><ellipse cx="255" cy="638.8203" fill="#F8F8F8" filter="url(#fem3eaols7ttu)" rx="12" ry="12" style="stroke: #383838; stroke-width: 2.0;"/><line style="stroke: #383838; stroke-width: 2.0;" x1="243" x2="267" y1="652.8203" y2="652.8203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="81" x="281" y="113.292">Open Search</text><ellipse cx="324.5" cy="84.2969" fill="#F8F8F8" filter="url(#fem3eaols7ttu)" rx="12" ry="12" style="stroke: #383838; stroke-width: 2.0;"/><line style="stroke: #383838; stroke-width: 2.0;" x1="312.5" x2="336.5" y1="98.2969" y2="98.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="81" x="281" y="619.5186">Open Search</text><ellipse cx="324.5" cy="638.8203" fill="#F8F8F8" filter="url(#fem3eaols7ttu)" rx="12" ry="12" style="stroke: #383838; stroke-width: 2.0;"/><line style="stroke: #383838; stroke-width: 2.0;" x1="312.5" x2="336.5" y1="652.8203" y2="652.8203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="93" x="378" y="113.292">Open Platform</text><ellipse cx="427.5" cy="84.2969" fill="#F8F8F8" filter="url(#fem3eaols7ttu)" rx="12" ry="12" style="stroke: #383838; stroke-width: 2.0;"/><line style="stroke: #383838; stroke-width: 2.0;" x1="415.5" x2="439.5" y1="98.2969" y2="98.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="93" x="378" y="619.5186">Open Platform</text><ellipse cx="427.5" cy="638.8203" fill="#F8F8F8" filter="url(#fem3eaols7ttu)" rx="12" ry="12" style="stroke: #383838; stroke-width: 2.0;"/><line style="stroke: #383838; stroke-width: 2.0;" x1="415.5" x2="439.5" y1="652.8203" y2="652.8203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="487" y="113.292">MusicBrainz</text><ellipse cx="529" cy="84.2969" fill="#F8F8F8" filter="url(#fem3eaols7ttu)" rx="12" ry="12" style="stroke: #383838; stroke-width: 2.0;"/><line style="stroke: #383838; stroke-width: 2.0;" x1="517" x2="541" y1="98.2969" y2="98.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="487" y="619.5186">MusicBrainz</text><ellipse cx="529" cy="638.8203" fill="#F8F8F8" filter="url(#fem3eaols7ttu)" rx="12" ry="12" style="stroke: #383838; stroke-width: 2.0;"/><line style="stroke: #383838; stroke-width: 2.0;" x1="517" x2="541" y1="652.8203" y2="652.8203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="88" x="581" y="113.292">Load file (TSV)</text><path d="M610,64.2969 C610,54.2969 628,54.2969 628,54.2969 C628,54.2969 646,54.2969 646,64.2969 L646,90.2969 C646,100.2969 628,100.2969 628,100.2969 C628,100.2969 610,100.2969 610,90.2969 L610,64.2969 " fill="#F8F8F8" filter="url(#fem3eaols7ttu)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M610,64.2969 C610,74.2969 628,74.2969 628,74.2969 C628,74.2969 646,74.2969 646,64.2969 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="88" x="581" y="619.5186">Load file (TSV)</text><path d="M610,632.8203 C610,622.8203 628,622.8203 628,622.8203 C628,622.8203 646,622.8203 646,632.8203 L646,658.8203 C646,668.8203 628,668.8203 628,668.8203 C628,668.8203 610,668.8203 610,658.8203 L610,632.8203 " fill="#F8F8F8" filter="url(#fem3eaols7ttu)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M610,632.8203 C610,642.8203 628,642.8203 628,642.8203 C628,642.8203 646,642.8203 646,632.8203 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><path d="M13,133.5938 L131,133.5938 L131,140.5938 L121,150.5938 L13,150.5938 L13,133.5938 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="114.5313" style="stroke: #000000; stroke-width: 2.0;" width="268" x="13" y="133.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="73" x="28" y="146.6606">Get holding</text><polygon fill="#383838" points="243,167.8594,253,171.8594,243,175.8594,247,171.8594" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="41" x2="249" y1="171.8594" y2="171.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="169" x="48" y="166.7935">Query holding list (Data type)</text><path d="M26,184.8594 L26,209.8594 L269,209.8594 L269,194.8594 L259,184.8594 L26,184.8594 " fill="#ECECEC" filter="url(#fem3eaols7ttu)" style="stroke: #383838; stroke-width: 1.0;"/><path d="M259,184.8594 L259,194.8594 L269,194.8594 L259,184.8594 " fill="#ECECEC" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="188" x="47" y="201.9263">ISBN + UPC may not be available</text><polygon fill="#383838" points="52,236.125,42,240.125,52,244.125,48,240.125" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="46" x2="254" y1="240.125" y2="240.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="190" x="58" y="235.0591">FAUST, Creator, Title, (ISBN, UPC)</text><path d="M13,262.125 L76,262.125 L76,269.125 L66,279.125 L13,279.125 L13,262.125 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="178.7344" style="stroke: #000000; stroke-width: 2.0;" width="474" x="13" y="262.125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="28" y="275.1919">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="172" x="91" y="274.3354">[Get metadata (Open Platform)]</text><polygon fill="#383838" points="415.5,296.3906,425.5,300.3906,415.5,304.3906,419.5,300.3906" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="41" x2="421.5" y1="300.3906" y2="300.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="48" y="295.3247">Query list: Faust</text><polygon fill="#383838" points="52,340.6563,42,344.6563,52,348.6563,48,344.6563" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="46" x2="426.5" y1="344.6563" y2="344.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="58" y="324.4575">FAUST, PID, Creator,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="135" x="58" y="339.5903">Title, ISBN (??), UPC (??)</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="487" y1="353.6563" y2="353.6563"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="160" x="18" y="363.8667">[Get metadata (Open Search)]</text><polygon fill="#383838" points="312.5,384.5938,322.5,388.5938,312.5,392.5938,316.5,388.5938" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="41" x2="318.5" y1="388.5938" y2="388.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="48" y="383.5278">Query list: Faust</text><polygon fill="#383838" points="52,428.8594,42,432.8594,52,436.8594,48,432.8594" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="46" x2="323.5" y1="432.8594" y2="432.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="204" x="58" y="412.6606">FAUST, PID, Creator (100a+h/110a),</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="221" x="58" y="427.7935">Title (245a), ISBN (021a+b), UPC (023a)</text><path d="M13,454.8594 L236,454.8594 L236,461.8594 L226,471.8594 L13,471.8594 L13,454.8594 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="568" x="13" y="454.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="178" x="28" y="467.9263">Get cover URL (Musicbrainz)</text><polygon fill="#383838" points="517,489.125,527,493.125,517,497.125,521,493.125" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="41" x2="523" y1="493.125" y2="493.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="165" x="48" y="488.0591">Query list: Creator, Title, UPC</text><polygon fill="#383838" points="52,518.2578,42,522.2578,52,526.2578,48,522.2578" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="46" x2="528" y1="522.2578" y2="522.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="173" x="58" y="517.1919">mbid, Creator, Title, Cover link</text><path d="M13,544.2578 L145,544.2578 L145,551.2578 L135,561.2578 L13,561.2578 L13,544.2578 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="672" x="13" y="544.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="87" x="28" y="557.3247">Build load file</text><polygon fill="#383838" points="616,578.5234,626,582.5234,616,586.5234,620,582.5234" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="41" x2="622" y1="582.5234" y2="582.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="260" x="48" y="577.4575">FAUST, PPID, PID, Vendor, Height, Width, URL</text><!--MD5=[d601185df1b2895a94ad46b48b2f2a8d]
@startuml

title Cover Service matching process - Sequence Diagram
title How to match local holding and build load file
skinparam monochrome true

actor User
entity FBS 
entity "Open Search" as OpenSearch
entity "Open Platform" as OP
entity "MusicBrainz" as MB
database "Load file (TSV)" as TSV


group Get holding
    User -> FBS: Query holding list (Data type)
    note over User, FBS: ISBN + UPC may not be available
    User <- - FBS: FAUST, Creator, Title, (ISBN, UPC)
end

alt Get metadata (Open Platform)
    User -> OP: Query list: Faust
    User <- - OP: FAUST, PID, Creator,\nTitle, ISBN (??), UPC (??)
else Get metadata (Open Search)
    User -> OpenSearch: Query list: Faust
    User <- - OpenSearch: FAUST, PID, Creator (100a+h/110a),\nTitle (245a), ISBN (021a+b), UPC (023a)
end


group Get cover URL (Musicbrainz)
    User -> MB: Query list: Creator, Title, UPC
    User <- - MB: mbid, Creator, Title, Cover link
end


group Build load file
    User -> TSV: FAUST, PPID, PID, Vendor, Height, Width, URL
end
@enduml

PlantUML version 1.2019.13(Tue Dec 10 17:18:29 GMT 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_202-b08
Operating System: Linux
Default Encoding: ANSI_X3.4-1968
Language: en
Country: US
--></g></svg>