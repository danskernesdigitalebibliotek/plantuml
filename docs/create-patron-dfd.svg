<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="790px" preserveAspectRatio="none" style="width:1351px;height:790px;" version="1.1" viewBox="0 0 1351 790" width="1351px" zoomAndPan="magnify"><defs><filter height="300%" id="f1tsvtjbfcgjxv" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="369" x="487.5" y="43.3486">Create patron DFD - Sequence Diagram</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="328" x="508" y="781.7061">DDB CMS create patron (Adgangsplatformen)</text><rect fill="#FFFFFF" filter="url(#f1tsvtjbfcgjxv)" height="193.0625" style="stroke: #000000; stroke-width: 2.0;" width="1132" x="10" y="154.8906"/><rect fill="#FFFFFF" filter="url(#f1tsvtjbfcgjxv)" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="946.5" x="387.5" y="445.3516"/><rect fill="#FFFFFF" filter="url(#f1tsvtjbfcgjxv)" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="946.5" x="387.5" y="534.75"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="47" x2="47" y1="137.8906" y2="685.4141"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="421.5" x2="421.5" y1="137.8906" y2="685.4141"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="515.5" x2="515.5" y1="137.8906" y2="685.4141"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1106" x2="1106" y1="137.8906" y2="685.4141"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1172" x2="1172" y1="137.8906" y2="685.4141"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1238" x2="1238" y1="137.8906" y2="685.4141"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1299" x2="1299" y1="137.8906" y2="685.4141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="20" y="134.5889">Patron</text><ellipse cx="47" cy="64.5938" fill="#F8F8F8" filter="url(#f1tsvtjbfcgjxv)" rx="8" ry="8" style="stroke: #383838; stroke-width: 2.0;"/><path d="M47,72.5938 L47,99.5938 M34,80.5938 L60,80.5938 M47,99.5938 L34,114.5938 M47,99.5938 L60,114.5938 " fill="none" filter="url(#f1tsvtjbfcgjxv)" style="stroke: #383838; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="20" y="697.4092">Patron</text><ellipse cx="47" cy="710.7109" fill="#F8F8F8" filter="url(#f1tsvtjbfcgjxv)" rx="8" ry="8" style="stroke: #383838; stroke-width: 2.0;"/><path d="M47,718.7109 L47,745.7109 M34,726.7109 L60,726.7109 M47,745.7109 L34,760.7109 M47,745.7109 L60,760.7109 " fill="none" filter="url(#f1tsvtjbfcgjxv)" style="stroke: #383838; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="403.5" y="134.5889">CMS</text><path d="M401.5,93.5938 L401.5,117.5938 M401.5,105.5938 L418.5,105.5938 " fill="none" filter="url(#f1tsvtjbfcgjxv)" style="stroke: #383838; stroke-width: 2.0;"/><ellipse cx="430.5" cy="105.5938" fill="#F8F8F8" filter="url(#f1tsvtjbfcgjxv)" rx="12" ry="12" style="stroke: #383838; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="403.5" y="697.4092">CMS</text><path d="M401.5,704.7109 L401.5,728.7109 M401.5,716.7109 L418.5,716.7109 " fill="none" filter="url(#f1tsvtjbfcgjxv)" style="stroke: #383838; stroke-width: 2.0;"/><ellipse cx="430.5" cy="716.7109" fill="#F8F8F8" filter="url(#f1tsvtjbfcgjxv)" rx="12" ry="12" style="stroke: #383838; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="113" x="456.5" y="134.5889">Accessplatform</text><path d="M495.5,93.5938 L495.5,117.5938 M495.5,105.5938 L512.5,105.5938 " fill="none" filter="url(#f1tsvtjbfcgjxv)" style="stroke: #383838; stroke-width: 2.0;"/><ellipse cx="524.5" cy="105.5938" fill="#F8F8F8" filter="url(#f1tsvtjbfcgjxv)" rx="12" ry="12" style="stroke: #383838; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="113" x="456.5" y="697.4092">Accessplatform</text><path d="M495.5,704.7109 L495.5,728.7109 M495.5,716.7109 L512.5,716.7109 " fill="none" filter="url(#f1tsvtjbfcgjxv)" style="stroke: #383838; stroke-width: 2.0;"/><ellipse cx="524.5" cy="716.7109" fill="#F8F8F8" filter="url(#f1tsvtjbfcgjxv)" rx="12" ry="12" style="stroke: #383838; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="46" x="1080" y="134.5889">NemId</text><path d="M1085.5,93.5938 L1085.5,117.5938 M1085.5,105.5938 L1102.5,105.5938 " fill="none" filter="url(#f1tsvtjbfcgjxv)" style="stroke: #383838; stroke-width: 2.0;"/><ellipse cx="1114.5" cy="105.5938" fill="#F8F8F8" filter="url(#f1tsvtjbfcgjxv)" rx="12" ry="12" style="stroke: #383838; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="46" x="1080" y="697.4092">NemId</text><path d="M1085.5,704.7109 L1085.5,728.7109 M1085.5,716.7109 L1102.5,716.7109 " fill="none" filter="url(#f1tsvtjbfcgjxv)" style="stroke: #383838; stroke-width: 2.0;"/><ellipse cx="1114.5" cy="716.7109" fill="#F8F8F8" filter="url(#f1tsvtjbfcgjxv)" rx="12" ry="12" style="stroke: #383838; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="54" x="1142" y="134.5889">Session</text><path d="M1154,85.5938 C1154,75.5938 1172,75.5938 1172,75.5938 C1172,75.5938 1190,75.5938 1190,85.5938 L1190,111.5938 C1190,121.5938 1172,121.5938 1172,121.5938 C1172,121.5938 1154,121.5938 1154,111.5938 L1154,85.5938 " fill="#F8F8F8" filter="url(#f1tsvtjbfcgjxv)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1154,85.5938 C1154,95.5938 1172,95.5938 1172,95.5938 C1172,95.5938 1190,95.5938 1190,85.5938 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="54" x="1142" y="697.4092">Session</text><path d="M1154,710.7109 C1154,700.7109 1172,700.7109 1172,700.7109 C1172,700.7109 1190,700.7109 1190,710.7109 L1190,736.7109 C1190,746.7109 1172,746.7109 1172,746.7109 C1172,746.7109 1154,746.7109 1154,736.7109 L1154,710.7109 " fill="#F8F8F8" filter="url(#f1tsvtjbfcgjxv)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1154,710.7109 C1154,720.7109 1172,720.7109 1172,720.7109 C1172,720.7109 1190,720.7109 1190,710.7109 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="47" x="1212" y="134.5889">Drupal</text><path d="M1220.5,85.5938 C1220.5,75.5938 1238.5,75.5938 1238.5,75.5938 C1238.5,75.5938 1256.5,75.5938 1256.5,85.5938 L1256.5,111.5938 C1256.5,121.5938 1238.5,121.5938 1238.5,121.5938 C1238.5,121.5938 1220.5,121.5938 1220.5,111.5938 L1220.5,85.5938 " fill="#F8F8F8" filter="url(#f1tsvtjbfcgjxv)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1220.5,85.5938 C1220.5,95.5938 1238.5,95.5938 1238.5,95.5938 C1238.5,95.5938 1256.5,95.5938 1256.5,85.5938 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="47" x="1212" y="697.4092">Drupal</text><path d="M1220.5,710.7109 C1220.5,700.7109 1238.5,700.7109 1238.5,700.7109 C1238.5,700.7109 1256.5,700.7109 1256.5,710.7109 L1256.5,736.7109 C1256.5,746.7109 1238.5,746.7109 1238.5,746.7109 C1238.5,746.7109 1220.5,746.7109 1220.5,736.7109 L1220.5,710.7109 " fill="#F8F8F8" filter="url(#f1tsvtjbfcgjxv)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1220.5,710.7109 C1220.5,720.7109 1238.5,720.7109 1238.5,720.7109 C1238.5,720.7109 1256.5,720.7109 1256.5,710.7109 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="29" x="1282" y="134.5889">LMS</text><path d="M1279,93.5938 L1279,117.5938 M1279,105.5938 L1296,105.5938 " fill="none" filter="url(#f1tsvtjbfcgjxv)" style="stroke: #383838; stroke-width: 2.0;"/><ellipse cx="1308" cy="105.5938" fill="#F8F8F8" filter="url(#f1tsvtjbfcgjxv)" rx="12" ry="12" style="stroke: #383838; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="29" x="1282" y="697.4092">LMS</text><path d="M1279,704.7109 L1279,728.7109 M1279,716.7109 L1296,716.7109 " fill="none" filter="url(#f1tsvtjbfcgjxv)" style="stroke: #383838; stroke-width: 2.0;"/><ellipse cx="1308" cy="716.7109" fill="#F8F8F8" filter="url(#f1tsvtjbfcgjxv)" rx="12" ry="12" style="stroke: #383838; stroke-width: 2.0;"/><path d="M10,154.8906 L135,154.8906 L135,161.8906 L125,171.8906 L10,171.8906 L10,154.8906 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="193.0625" style="stroke: #000000; stroke-width: 2.0;" width="1132" x="10" y="154.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="80" x="25" y="167.9575">Basic login</text><polygon fill="#383838" points="410,204.2891,420,208.2891,410,212.2891,414,208.2891" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="47" x2="416" y1="208.2891" y2="208.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="54" y="195.6567">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="67" y="188.0903">Create patron account</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="219" x="67" y="203.2231">(https:xx.ddbcms.dk/registration/)</text><polygon fill="#383838" points="1094,248.5547,1104,252.5547,1094,256.5547,1098,252.5547" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="422" x2="1100" y1="252.5547" y2="252.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="429" y="239.9224">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="442" y="232.356">Identify</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="647" x="442" y="247.4888">(https://xx.ddbcms.dk/adgangsplatformen/login?destination=registration/acceptance&amp;idp=nemlogin)</text><polygon fill="#383838" points="58,277.6875,48,281.6875,58,285.6875,54,281.6875" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="52" x2="1105" y1="281.6875" y2="281.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="8" x="64" y="276.6216">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="34" x="76" y="276.6216">Login</text><polygon fill="#383838" points="1094,306.8203,1104,310.8203,1094,314.8203,1098,310.8203" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="47" x2="1100" y1="310.8203" y2="310.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="54" y="305.7544">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="67" y="305.7544">NemId id + key</text><polygon fill="#383838" points="433,335.9531,423,339.9531,433,343.9531,429,339.9531" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="427" x2="1105" y1="339.9531" y2="339.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="439" y="334.8872">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="135" x="452" y="334.8872">CPR (Muncipality ID?)</text><polygon fill="#383838" points="58,387.2188,48,391.2188,58,395.2188,54,391.2188" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="52" x2="421" y1="391.2188" y2="391.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="64" y="378.5864">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="338" x="77" y="371.02">Mandatory: Name, email, pickup library, Pin (x digits)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="257" x="77" y="386.1528">(https:xx.ddbcms.dk/registration/accep)</text><path d="M427,362.5195 L427,387.5195 L1087,387.5195 L1087,372.5195 L1077,362.5195 L427,362.5195 " fill="#ECECEC" filter="url(#f1tsvtjbfcgjxv)" style="stroke: #383838; stroke-width: 1.0;"/><path d="M1077,362.5195 L1077,372.5195 L1087,372.5195 L1077,362.5195 " fill="#ECECEC" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="639" x="433" y="379.5864">Name, email (NemMail), SMS (NemSms), muncipality ID should be delivered by the Serviceplatform!</text><polygon fill="#383838" points="410,421.3516,420,425.3516,410,429.3516,414,425.3516" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="47" x2="416" y1="425.3516" y2="425.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="54" y="420.2856">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="261" x="67" y="420.2856">Name, email, pickup library, Pin (x digits)</text><path d="M427,404.2188 L427,429.2188 L774,429.2188 L774,414.2188 L764,404.2188 L427,404.2188 " fill="#ECECEC" filter="url(#f1tsvtjbfcgjxv)" style="stroke: #383838; stroke-width: 1.0;"/><path d="M764,404.2188 L764,414.2188 L774,414.2188 L764,404.2188 " fill="#ECECEC" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="326" x="433" y="421.2856">No of digits in PIN is variable. Standard: 4 (Aakb: 5)</text><path d="M387.5,445.3516 L595.5,445.3516 L595.5,452.3516 L585.5,462.3516 L387.5,462.3516 L387.5,445.3516 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="946.5" x="387.5" y="445.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="163" x="402.5" y="458.4185">Create Patron in LMS</text><polygon fill="#383838" points="1287.5,479.6172,1297.5,483.6172,1287.5,487.6172,1291.5,483.6172" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="422" x2="1293.5" y1="483.6172" y2="483.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="429" y="478.5513">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="295" x="442" y="478.5513">CPR, Name, email, pickup library, Pin (x digits)</text><polygon fill="#383838" points="433,508.75,423,512.75,433,516.75,429,512.75" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="427" x2="1298.5" y1="512.75" y2="512.75"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="439" y="507.6841">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="452" y="507.6841">LMS patron data</text><path d="M387.5,534.75 L661.5,534.75 L661.5,541.75 L651.5,551.75 L387.5,551.75 L387.5,534.75 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="946.5" x="387.5" y="534.75"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="229" x="402.5" y="547.8169">Reauthenticate Patron in LMS</text><polygon fill="#383838" points="1287.5,569.0156,1297.5,573.0156,1287.5,577.0156,1291.5,573.0156" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="422" x2="1293.5" y1="573.0156" y2="573.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="429" y="567.9497">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146" x="452" y="567.9497">(Preauth) CPR, Agency</text><polygon fill="#383838" points="433,598.1484,423,602.1484,433,606.1484,429,602.1484" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="427" x2="1298.5" y1="602.1484" y2="602.1484"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="439" y="597.0825">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="461" y="597.0825">LMS Patron Data</text><polygon fill="#383838" points="1160,634.2813,1170,638.2813,1160,642.2813,1164,638.2813" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="422" x2="1166" y1="638.2813" y2="638.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="429" y="633.2153">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="247" x="451" y="633.2153">Save session: Userid, LMS Patron Data</text><polygon fill="#383838" points="1226.5,663.4141,1236.5,667.4141,1226.5,671.4141,1230.5,667.4141" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="422" x2="1232.5" y1="667.4141" y2="667.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="429" y="662.3481">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="464" x="450" y="662.3481">Save patron: Userid (hashed), LMS Patron Data (Name, email, blockings)</text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="211" x="1133" y="14.2822">After Simon Holt: Brugeroprettelse DFD</text><!--MD5=[0ddf78a2210c49c79b3a0117e8451db6]
@startuml
title Create patron DFD - Sequence Diagram
header After Simon Holt: Brugeroprettelse DFD
caption DDB CMS create patron (Adgangsplatformen)

' Skinparams '
skinparam monochrome true
autonumber


actor "Patron" as USER
boundary CMS
boundary Accessplatform as AP
boundary NemId as NEMID
'control "Shopping Cart" as SC
database "Session" as SESSION
database "Drupal" as DRUPAL
boundary LMS
'"Library\nManagemt\nSystem" as LMS


group Basic login

    USER -> CMS: Create patron account\n(https:xx.ddbcms.dk/registration/)
    'CMS -> AP: Elevated Client Id + Agency\n(https://xx.ddbcms.dk/adgangsplatformen/login?destination=registration/acceptance&idp=nemlogin)
    'AP -> NEMID: Identify
    CMS -> NEMID: Identify\n(https://xx.ddbcms.dk/adgangsplatformen/login?destination=registration/acceptance&idp=nemlogin)

    NEMID -> USER: Login
    NEMID <- - USER: NemId id + key
    CMS <- - NEMID: CPR (Muncipality ID?)
end


    CMS -> USER: Mandatory: Name, email, pickup library, Pin (x digits)\n(https:xx.ddbcms.dk/registration/accep)
    note right
        Name, email (NemMail), SMS (NemSms), muncipality ID should be delivered by the Serviceplatform!
    end note
    CMS <- - USER: Name, email, pickup library, Pin (x digits)
    note right
        No of digits in PIN is variable. Standard: 4 (Aakb: 5)
    end note

group Create Patron in LMS
    CMS -> LMS: CPR, Name, email, pickup library, Pin (x digits)
    CMS <- - LMS: LMS patron data
end
group Reauthenticate Patron in LMS
    CMS -> LMS: (Preauth) CPR, Agency
    CMS <- - LMS: LMS Patron Data
end

CMS -> SESSION: Save session: Userid, LMS Patron Data
CMS -> DRUPAL: Save patron: Userid (hashed), LMS Patron Data (Name, email, blockings)
@enduml

@startuml
title Create patron DFD - Sequence Diagram
header After Simon Holt: Brugeroprettelse DFD
caption DDB CMS create patron (Adgangsplatformen)

skinparam monochrome true
autonumber


actor "Patron" as USER
boundary CMS
boundary Accessplatform as AP
boundary NemId as NEMID
database "Session" as SESSION
database "Drupal" as DRUPAL
boundary LMS


group Basic login

    USER -> CMS: Create patron account\n(https:xx.ddbcms.dk/registration/)
    CMS -> NEMID: Identify\n(https://xx.ddbcms.dk/adgangsplatformen/login?destination=registration/acceptance&idp=nemlogin)

    NEMID -> USER: Login
    NEMID <- - USER: NemId id + key
    CMS <- - NEMID: CPR (Muncipality ID?)
end


    CMS -> USER: Mandatory: Name, email, pickup library, Pin (x digits)\n(https:xx.ddbcms.dk/registration/accep)
    note right
        Name, email (NemMail), SMS (NemSms), muncipality ID should be delivered by the Serviceplatform!
    end note
    CMS <- - USER: Name, email, pickup library, Pin (x digits)
    note right
        No of digits in PIN is variable. Standard: 4 (Aakb: 5)
    end note

group Create Patron in LMS
    CMS -> LMS: CPR, Name, email, pickup library, Pin (x digits)
    CMS <- - LMS: LMS patron data
end
group Reauthenticate Patron in LMS
    CMS -> LMS: (Preauth) CPR, Agency
    CMS <- - LMS: LMS Patron Data
end

CMS -> SESSION: Save session: Userid, LMS Patron Data
CMS -> DRUPAL: Save patron: Userid (hashed), LMS Patron Data (Name, email, blockings)
@enduml

PlantUML version 1.2020.20beta13(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>