<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="803px" preserveAspectRatio="none" style="width:1044px;height:803px;" version="1.1" viewBox="0 0 1044 803" width="1044px" zoomAndPan="magnify"><defs><filter height="300%" id="f57ymixp98fws" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="369" x="334.25" y="43.3486">Create patron DFD - Sequence Diagram</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="328" x="354.75" y="794.5732">DDB CMS create patron (Adgangsplatformen)</text><rect fill="#FFFFFF" filter="url(#f57ymixp98fws)" height="221.0625" style="stroke: #000000; stroke-width: 2.0;" width="757.5" x="10" y="154.8906"/><rect fill="#FFFFFF" filter="url(#f57ymixp98fws)" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="640" x="387.5" y="458.2188"/><rect fill="#FFFFFF" filter="url(#f57ymixp98fws)" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="640" x="387.5" y="547.6172"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="47" x2="47" y1="137.8906" y2="698.2813"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="421.5" x2="421.5" y1="137.8906" y2="698.2813"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="635.5" x2="635.5" y1="137.8906" y2="698.2813"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="731.5" x2="731.5" y1="137.8906" y2="698.2813"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="797.5" x2="797.5" y1="137.8906" y2="698.2813"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="931.5" x2="931.5" y1="137.8906" y2="698.2813"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="992.5" x2="992.5" y1="137.8906" y2="698.2813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="20" y="134.5889">Patron</text><ellipse cx="47" cy="64.5938" fill="#F8F8F8" filter="url(#f57ymixp98fws)" rx="8" ry="8" style="stroke: #383838; stroke-width: 2.0;"/><path d="M47,72.5938 L47,99.5938 M34,80.5938 L60,80.5938 M47,99.5938 L34,114.5938 M47,99.5938 L60,114.5938 " fill="none" filter="url(#f57ymixp98fws)" style="stroke: #383838; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="20" y="710.2764">Patron</text><ellipse cx="47" cy="723.5781" fill="#F8F8F8" filter="url(#f57ymixp98fws)" rx="8" ry="8" style="stroke: #383838; stroke-width: 2.0;"/><path d="M47,731.5781 L47,758.5781 M34,739.5781 L60,739.5781 M47,758.5781 L34,773.5781 M47,758.5781 L60,773.5781 " fill="none" filter="url(#f57ymixp98fws)" style="stroke: #383838; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="403.5" y="134.5889">CMS</text><path d="M401.5,93.5938 L401.5,117.5938 M401.5,105.5938 L418.5,105.5938 " fill="none" filter="url(#f57ymixp98fws)" style="stroke: #383838; stroke-width: 2.0;"/><ellipse cx="430.5" cy="105.5938" fill="#F8F8F8" filter="url(#f57ymixp98fws)" rx="12" ry="12" style="stroke: #383838; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="403.5" y="710.2764">CMS</text><path d="M401.5,717.5781 L401.5,741.5781 M401.5,729.5781 L418.5,729.5781 " fill="none" filter="url(#f57ymixp98fws)" style="stroke: #383838; stroke-width: 2.0;"/><ellipse cx="430.5" cy="729.5781" fill="#F8F8F8" filter="url(#f57ymixp98fws)" rx="12" ry="12" style="stroke: #383838; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="113" x="576.5" y="134.5889">Accessplatform</text><path d="M615.5,93.5938 L615.5,117.5938 M615.5,105.5938 L632.5,105.5938 " fill="none" filter="url(#f57ymixp98fws)" style="stroke: #383838; stroke-width: 2.0;"/><ellipse cx="644.5" cy="105.5938" fill="#F8F8F8" filter="url(#f57ymixp98fws)" rx="12" ry="12" style="stroke: #383838; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="113" x="576.5" y="710.2764">Accessplatform</text><path d="M615.5,717.5781 L615.5,741.5781 M615.5,729.5781 L632.5,729.5781 " fill="none" filter="url(#f57ymixp98fws)" style="stroke: #383838; stroke-width: 2.0;"/><ellipse cx="644.5" cy="729.5781" fill="#F8F8F8" filter="url(#f57ymixp98fws)" rx="12" ry="12" style="stroke: #383838; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="46" x="705.5" y="134.5889">NemId</text><path d="M711,93.5938 L711,117.5938 M711,105.5938 L728,105.5938 " fill="none" filter="url(#f57ymixp98fws)" style="stroke: #383838; stroke-width: 2.0;"/><ellipse cx="740" cy="105.5938" fill="#F8F8F8" filter="url(#f57ymixp98fws)" rx="12" ry="12" style="stroke: #383838; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="46" x="705.5" y="710.2764">NemId</text><path d="M711,717.5781 L711,741.5781 M711,729.5781 L728,729.5781 " fill="none" filter="url(#f57ymixp98fws)" style="stroke: #383838; stroke-width: 2.0;"/><ellipse cx="740" cy="729.5781" fill="#F8F8F8" filter="url(#f57ymixp98fws)" rx="12" ry="12" style="stroke: #383838; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="54" x="767.5" y="134.5889">Session</text><path d="M779.5,85.5938 C779.5,75.5938 797.5,75.5938 797.5,75.5938 C797.5,75.5938 815.5,75.5938 815.5,85.5938 L815.5,111.5938 C815.5,121.5938 797.5,121.5938 797.5,121.5938 C797.5,121.5938 779.5,121.5938 779.5,111.5938 L779.5,85.5938 " fill="#F8F8F8" filter="url(#f57ymixp98fws)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M779.5,85.5938 C779.5,95.5938 797.5,95.5938 797.5,95.5938 C797.5,95.5938 815.5,95.5938 815.5,85.5938 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="54" x="767.5" y="710.2764">Session</text><path d="M779.5,723.5781 C779.5,713.5781 797.5,713.5781 797.5,713.5781 C797.5,713.5781 815.5,713.5781 815.5,723.5781 L815.5,749.5781 C815.5,759.5781 797.5,759.5781 797.5,759.5781 C797.5,759.5781 779.5,759.5781 779.5,749.5781 L779.5,723.5781 " fill="#F8F8F8" filter="url(#f57ymixp98fws)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M779.5,723.5781 C779.5,733.5781 797.5,733.5781 797.5,733.5781 C797.5,733.5781 815.5,733.5781 815.5,723.5781 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="47" x="905.5" y="134.5889">Drupal</text><path d="M914,85.5938 C914,75.5938 932,75.5938 932,75.5938 C932,75.5938 950,75.5938 950,85.5938 L950,111.5938 C950,121.5938 932,121.5938 932,121.5938 C932,121.5938 914,121.5938 914,111.5938 L914,85.5938 " fill="#F8F8F8" filter="url(#f57ymixp98fws)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M914,85.5938 C914,95.5938 932,95.5938 932,95.5938 C932,95.5938 950,95.5938 950,85.5938 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="47" x="905.5" y="710.2764">Drupal</text><path d="M914,723.5781 C914,713.5781 932,713.5781 932,713.5781 C932,713.5781 950,713.5781 950,723.5781 L950,749.5781 C950,759.5781 932,759.5781 932,759.5781 C932,759.5781 914,759.5781 914,749.5781 L914,723.5781 " fill="#F8F8F8" filter="url(#f57ymixp98fws)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M914,723.5781 C914,733.5781 932,733.5781 932,733.5781 C932,733.5781 950,733.5781 950,723.5781 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="29" x="975.5" y="134.5889">LMS</text><path d="M972.5,93.5938 L972.5,117.5938 M972.5,105.5938 L989.5,105.5938 " fill="none" filter="url(#f57ymixp98fws)" style="stroke: #383838; stroke-width: 2.0;"/><ellipse cx="1001.5" cy="105.5938" fill="#F8F8F8" filter="url(#f57ymixp98fws)" rx="12" ry="12" style="stroke: #383838; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="29" x="975.5" y="710.2764">LMS</text><path d="M972.5,717.5781 L972.5,741.5781 M972.5,729.5781 L989.5,729.5781 " fill="none" filter="url(#f57ymixp98fws)" style="stroke: #383838; stroke-width: 2.0;"/><ellipse cx="1001.5" cy="729.5781" fill="#F8F8F8" filter="url(#f57ymixp98fws)" rx="12" ry="12" style="stroke: #383838; stroke-width: 2.0;"/><path d="M10,154.8906 L135,154.8906 L135,161.8906 L125,171.8906 L10,171.8906 L10,154.8906 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="221.0625" style="stroke: #000000; stroke-width: 2.0;" width="757.5" x="10" y="154.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="80" x="25" y="167.9575">Basic login</text><polygon fill="#383838" points="410,189.1563,420,193.1563,410,197.1563,414,193.1563" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="47" x2="416" y1="193.1563" y2="193.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="54" y="188.0903">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="67" y="188.0903">Create patron account</text><polygon fill="#383838" points="624,218.2891,634,222.2891,624,226.2891,628,222.2891" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="422" x2="630" y1="222.2891" y2="222.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="429" y="217.2231">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="177" x="442" y="217.2231">Elevated Client Id + Agency</text><polygon fill="#383838" points="719.5,247.4219,729.5,251.4219,719.5,255.4219,723.5,251.4219" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="636" x2="725.5" y1="251.4219" y2="251.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="8" x="643" y="246.356">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="655" y="246.356">Identify</text><polygon fill="#383838" points="58,276.5547,48,280.5547,58,284.5547,54,280.5547" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="52" x2="730.5" y1="280.5547" y2="280.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="64" y="275.4888">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="34" x="77" y="275.4888">Login</text><polygon fill="#383838" points="719.5,305.6875,729.5,309.6875,719.5,313.6875,723.5,309.6875" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="47" x2="725.5" y1="309.6875" y2="309.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="54" y="304.6216">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="67" y="304.6216">NemId id + key</text><polygon fill="#383838" points="647,334.8203,637,338.8203,647,342.8203,643,338.8203" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="641" x2="730.5" y1="338.8203" y2="338.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="653" y="333.7544">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="666" y="333.7544">CPR</text><polygon fill="#383838" points="433,363.9531,423,367.9531,433,371.9531,429,367.9531" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="427" x2="635" y1="367.9531" y2="367.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="439" y="362.8872">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="452" y="362.8872">Authorization code</text><polygon fill="#383838" points="58,405.0859,48,409.0859,58,413.0859,54,409.0859" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="52" x2="421" y1="409.0859" y2="409.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="64" y="404.02">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="338" x="77" y="404.02">Mandatory: Name, email, pickup library, Pin (x digits)</text><path d="M427,387.9531 L427,412.9531 L771,412.9531 L771,397.9531 L761,387.9531 L427,387.9531 " fill="#ECECEC" filter="url(#f57ymixp98fws)" style="stroke: #383838; stroke-width: 1.0;"/><path d="M761,387.9531 L761,397.9531 L771,397.9531 L761,387.9531 " fill="#ECECEC" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="323" x="433" y="405.02">Name should be delivered by the Serviceplatform!</text><polygon fill="#383838" points="410,439.2188,420,443.2188,410,447.2188,414,443.2188" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="47" x2="416" y1="443.2188" y2="443.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="54" y="438.1528">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="261" x="67" y="438.1528">Name, email, pickup library, Pin (x digits)</text><path d="M387.5,458.2188 L595.5,458.2188 L595.5,465.2188 L585.5,475.2188 L387.5,475.2188 L387.5,458.2188 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="640" x="387.5" y="458.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="163" x="402.5" y="471.2856">Create Patron in LMS</text><polygon fill="#383838" points="981,492.4844,991,496.4844,981,500.4844,985,496.4844" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="422" x2="987" y1="496.4844" y2="496.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="429" y="491.4185">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="295" x="452" y="491.4185">CPR, Name, email, pickup library, Pin (x digits)</text><polygon fill="#383838" points="433,521.6172,423,525.6172,433,529.6172,429,525.6172" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="427" x2="992" y1="525.6172" y2="525.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="439" y="520.5513">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="461" y="520.5513">LMS patron data</text><path d="M387.5,547.6172 L661.5,547.6172 L661.5,554.6172 L651.5,564.6172 L387.5,564.6172 L387.5,547.6172 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="640" x="387.5" y="547.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="229" x="402.5" y="560.6841">Reauthenticate Patron in LMS</text><polygon fill="#383838" points="981,581.8828,991,585.8828,981,589.8828,985,585.8828" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="422" x2="987" y1="585.8828" y2="585.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="429" y="580.8169">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146" x="451" y="580.8169">(Preauth) CPR, Agency</text><polygon fill="#383838" points="433,611.0156,423,615.0156,433,619.0156,429,615.0156" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="427" x2="992" y1="615.0156" y2="615.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="439" y="609.9497">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="460" y="609.9497">LMS Patron Data</text><polygon fill="#383838" points="785.5,647.1484,795.5,651.1484,785.5,655.1484,789.5,651.1484" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="422" x2="791.5" y1="651.1484" y2="651.1484"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="429" y="646.0825">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="247" x="451" y="646.0825">Save session: Userid, LMS Patron Data</text><polygon fill="#383838" points="920,676.2813,930,680.2813,920,684.2813,924,680.2813" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="422" x2="926" y1="680.2813" y2="680.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="429" y="675.2153">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="464" x="451" y="675.2153">Save patron: Userid (hashed), LMS Patron Data (Name, email, blockings)</text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="211" x="826.5" y="14.2822">After Simon Holt: Brugeroprettelse DFD</text><!--MD5=[c1ad77f66392d9015560036ef400c8c5]
@startuml
title Create patron DFD - Sequence Diagram
header After Simon Holt: Brugeroprettelse DFD
caption DDB CMS create patron (Adgangsplatformen)

' Skinparams
skinparam monochrome true
autonumber


actor "Patron" as USER
boundary CMS
boundary Accessplatform as AP
boundary NemId as NEMID
'control "Shopping Cart" as SC
database "Session" as SESSION
database "Drupal" as DRUPAL
boundary LMS
'"Library\nManagemt\nSystem" as LMS


group Basic login
    USER -> CMS: Create patron account
    CMS -> AP: Elevated Client Id + Agency
    AP -> NEMID: Identify
    NEMID -> USER: Login
    NEMID <- - USER: NemId id + key
    AP <- - NEMID: CPR
    CMS <- - AP: Authorization code
end

    CMS -> USER: Mandatory: Name, email, pickup library, Pin (x digits)
    note right
        Name should be delivered by the Serviceplatform!
    end note
    CMS <- - USER: Name, email, pickup library, Pin (x digits)

group Create Patron in LMS
    CMS -> LMS: CPR, Name, email, pickup library, Pin (x digits)
    CMS <- - LMS: LMS patron data
end
group Reauthenticate Patron in LMS
    CMS -> LMS: (Preauth) CPR, Agency
    CMS <- - LMS: LMS Patron Data
end

CMS -> SESSION: Save session: Userid, LMS Patron Data
CMS -> DRUPAL: Save patron: Userid (hashed), LMS Patron Data (Name, email, blockings)
@enduml

@startuml
title Create patron DFD - Sequence Diagram
header After Simon Holt: Brugeroprettelse DFD
caption DDB CMS create patron (Adgangsplatformen)

skinparam monochrome true
autonumber


actor "Patron" as USER
boundary CMS
boundary Accessplatform as AP
boundary NemId as NEMID
database "Session" as SESSION
database "Drupal" as DRUPAL
boundary LMS


group Basic login
    USER -> CMS: Create patron account
    CMS -> AP: Elevated Client Id + Agency
    AP -> NEMID: Identify
    NEMID -> USER: Login
    NEMID <- - USER: NemId id + key
    AP <- - NEMID: CPR
    CMS <- - AP: Authorization code
end

    CMS -> USER: Mandatory: Name, email, pickup library, Pin (x digits)
    note right
        Name should be delivered by the Serviceplatform!
    end note
    CMS <- - USER: Name, email, pickup library, Pin (x digits)

group Create Patron in LMS
    CMS -> LMS: CPR, Name, email, pickup library, Pin (x digits)
    CMS <- - LMS: LMS patron data
end
group Reauthenticate Patron in LMS
    CMS -> LMS: (Preauth) CPR, Agency
    CMS <- - LMS: LMS Patron Data
end

CMS -> SESSION: Save session: Userid, LMS Patron Data
CMS -> DRUPAL: Save patron: Userid (hashed), LMS Patron Data (Name, email, blockings)
@enduml

PlantUML version 1.2020.20beta13(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>