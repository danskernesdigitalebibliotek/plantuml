<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="839px" preserveAspectRatio="none" style="width:577px;height:839px;" version="1.1" viewBox="0 0 577 839" width="577px" zoomAndPan="magnify"><defs><filter height="300%" id="ffk0667vyxi6j" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="328" x="120.25" y="22.9951">"eReolen Authentification - Sequence Diagram"</text><rect fill="#FFFFFF" filter="url(#ffk0667vyxi6j)" height="223.5391" style="stroke: #000000; stroke-width: 2.0;" width="475" x="80.5" y="511.1875"/><rect fill="#FFFFFF" filter="url(#ffk0667vyxi6j)" height="90.2031" style="stroke: #000000; stroke-width: 2.0;" width="264.5" x="90.5" y="564.4531"/><rect fill="#FFFFFF" height="43.9375" style="stroke: none; stroke-width: 1.0;" width="264.5" x="90.5" y="610.7188"/><rect fill="#FFFFFF" height="73.0703" style="stroke: none; stroke-width: 1.0;" width="475" x="80.5" y="661.6563"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="26" x2="26" y1="116.5938" y2="751.7266"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="138.5" x2="138.5" y1="116.5938" y2="751.7266"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="317" x2="317" y1="116.5938" y2="751.7266"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="396.5" x2="396.5" y1="116.5938" y2="751.7266"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="488.5" x2="488.5" y1="116.5938" y2="751.7266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="8" y="113.292">User</text><ellipse cx="26" cy="43.2969" fill="#FEFECE" filter="url(#ffk0667vyxi6j)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M26,51.2969 L26,78.2969 M13,59.2969 L39,59.2969 M26,78.2969 L13,93.2969 M26,78.2969 L39,93.2969 " fill="none" filter="url(#ffk0667vyxi6j)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="8" y="763.7217">User</text><ellipse cx="26" cy="777.0234" fill="#FEFECE" filter="url(#ffk0667vyxi6j)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M26,785.0234 L26,812.0234 M13,793.0234 L39,793.0234 M26,812.0234 L13,827.0234 M26,812.0234 L39,827.0234 " fill="none" filter="url(#ffk0667vyxi6j)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="100.5" y="113.292">eReolen.dk</text><path d="M118.5,72.2969 L118.5,96.2969 M118.5,84.2969 L135.5,84.2969 " fill="none" filter="url(#ffk0667vyxi6j)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="147.5" cy="84.2969" fill="#FEFECE" filter="url(#ffk0667vyxi6j)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="100.5" y="763.7217">eReolen.dk</text><path d="M118.5,771.0234 L118.5,795.0234 M118.5,783.0234 L135.5,783.0234 " fill="none" filter="url(#ffk0667vyxi6j)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="147.5" cy="783.0234" fill="#FEFECE" filter="url(#ffk0667vyxi6j)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="50" x="289" y="113.292">PubHub</text><ellipse cx="317" cy="84.2969" fill="#FEFECE" filter="url(#ffk0667vyxi6j)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="313,72.2969,319,67.2969,317,72.2969,319,77.2969,313,72.2969" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="50" x="289" y="763.7217">PubHub</text><ellipse cx="317" cy="783.0234" fill="#FEFECE" filter="url(#ffk0667vyxi6j)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="313,771.0234,319,766.0234,317,771.0234,319,776.0234,313,771.0234" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="45" x="371.5" y="113.292">BorChk</text><ellipse cx="397" cy="84.2969" fill="#FEFECE" filter="url(#ffk0667vyxi6j)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="385" x2="409" y1="98.2969" y2="98.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="45" x="371.5" y="763.7217">BorChk</text><ellipse cx="397" cy="783.0234" fill="#FEFECE" filter="url(#ffk0667vyxi6j)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="385" x2="409" y1="797.0234" y2="797.0234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="432.5" y="113.292">Adgangsplatform</text><ellipse cx="489" cy="84.2969" fill="#FEFECE" filter="url(#ffk0667vyxi6j)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="485,72.2969,491,67.2969,489,72.2969,491,77.2969,485,72.2969" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="432.5" y="763.7217">Adgangsplatform</text><ellipse cx="489" cy="783.0234" fill="#FEFECE" filter="url(#ffk0667vyxi6j)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="485,771.0234,491,766.0234,489,771.0234,491,776.0234,485,771.0234" style="stroke: #A80036; stroke-width: 1.0;"/><rect fill="#EEEEEE" filter="url(#ffk0667vyxi6j)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="562.5" x="3" y="147.1602"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="565.5" y1="147.1602" y2="147.1602"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="565.5" y1="150.1602" y2="150.1602"/><rect fill="#EEEEEE" filter="url(#ffk0667vyxi6j)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="73" x="247.75" y="136.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="56" x="253.75" y="152.6606">Old style</text><polygon fill="#A80036" points="127,186.8594,137,190.8594,127,194.8594,131,190.8594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="26" x2="133" y1="190.8594" y2="190.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="33" y="185.7935">Login + Borrow</text><polygon fill="#A80036" points="305,215.9922,315,219.9922,305,223.9922,309,219.9922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="139" x2="311" y1="219.9922" y2="219.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="146" y="214.9263">CPR, pin, PID</text><polygon fill="#A80036" points="385,245.125,395,249.125,385,253.125,389,249.125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="317" x2="391" y1="249.125" y2="249.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="55" x="324" y="244.0591">CPR + pin</text><polygon fill="#A80036" points="328,274.2578,318,278.2578,328,282.2578,324,278.2578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="322" x2="396" y1="278.2578" y2="278.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="334" y="273.1919">OK + kmd</text><polygon fill="#A80036" points="150,303.3906,140,307.3906,150,311.3906,146,307.3906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="144" x2="316" y1="307.3906" y2="307.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="27" x="156" y="302.3247">Data</text><rect fill="#EEEEEE" filter="url(#ffk0667vyxi6j)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="562.5" x="3" y="335.957"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="565.5" y1="335.957" y2="335.957"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="565.5" y1="338.957" y2="338.957"/><rect fill="#EEEEEE" filter="url(#ffk0667vyxi6j)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="126" x="221.25" y="325.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="109" x="227.25" y="341.4575">Adgangsplatform</text><polygon fill="#A80036" points="127,375.6563,137,379.6563,127,383.6563,131,379.6563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="26" x2="133" y1="379.6563" y2="379.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="33" y="374.5903">Login + Borrow</text><polygon fill="#A80036" points="477,404.7891,487,408.7891,477,412.7891,481,408.7891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="139" x2="483" y1="408.7891" y2="408.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="146" y="403.7231">Agency</text><polygon fill="#A80036" points="150,433.9219,140,437.9219,150,441.9219,146,437.9219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="144" x2="488" y1="437.9219" y2="437.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="105" x="156" y="432.856">Token, GUID, kmd</text><polygon fill="#A80036" points="305,463.0547,315,467.0547,305,471.0547,309,467.0547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="139" x2="311" y1="467.0547" y2="467.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="146" y="461.9888">Token, GUID, PID, kmn</text><polygon fill="#A80036" points="477,492.1875,487,496.1875,477,500.1875,481,496.1875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="317" x2="483" y1="496.1875" y2="496.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="36" x="324" y="491.1216">Token</text><path d="M80.5,511.1875 L143.5,511.1875 L143.5,518.1875 L133.5,528.1875 L80.5,528.1875 L80.5,511.1875 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="223.5391" style="stroke: #000000; stroke-width: 2.0;" width="475" x="80.5" y="511.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="95.5" y="524.2544">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="68" x="158.5" y="523.3979">[Token valid]</text><polygon fill="#A80036" points="328,545.4531,318,549.4531,328,553.4531,324,549.4531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="322" x2="488" y1="549.4531" y2="549.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="18" x="334" y="544.3872">OK</text><path d="M90.5,564.4531 L153.5,564.4531 L153.5,571.4531 L143.5,581.4531 L90.5,581.4531 L90.5,564.4531 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="90.2031" style="stroke: #000000; stroke-width: 2.0;" width="264.5" x="90.5" y="564.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="105.5" y="577.52">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="99" x="168.5" y="576.6636">[Quotas accepted]</text><polygon fill="#A80036" points="150,598.7188,140,602.7188,150,606.7188,146,602.7188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="144" x2="316" y1="602.7188" y2="602.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="27" x="156" y="597.6528">Data</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="90.5" x2="355" y1="611.7188" y2="611.7188"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="96" x="95.5" y="621.9292">[Quota exceeded]</text><polygon fill="#A80036" points="150,642.6563,140,646.6563,150,650.6563,146,646.6563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="144" x2="316" y1="646.6563" y2="646.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="154" x="156" y="641.5903">Message: Quota exceeded</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="80.5" x2="555.5" y1="662.6563" y2="662.6563"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54" x="85.5" y="672.8667">[Rejected]</text><polygon fill="#A80036" points="328,693.5938,318,697.5938,328,701.5938,324,697.5938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="322" x2="488" y1="697.5938" y2="697.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="19" x="334" y="692.5278">Fail</text><polygon fill="#A80036" points="150,722.7266,140,726.7266,150,730.7266,146,726.7266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="144" x2="316" y1="726.7266" y2="726.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="30" x="156" y="721.6606">Error</text><!--
@startuml

title "eReolen Authentification - Sequence Diagram"

actor User
boundary "eReolen.dk" as GUI
control "PubHub" as PUBH
entity BorChk as BORCHK
control "Adgangsplatform" as ACCPLAT


== Old style ==

User -> GUI : Login + Borrow
GUI -> PUBH : CPR, pin, PID
PUBH -> BORCHK: CPR + pin
PUBH <- - BORCHK: OK + kmd
GUI <- - PUBH : Data

== Adgangsplatform ==

User -> GUI : Login + Borrow
GUI -> ACCPLAT : Agency
GUI <- - ACCPLAT : Token, GUID, kmd

GUI -> PUBH : Token, GUID, PID, kmn

PUBH - -> ACCPLAT : Token


alt Token valid
    PUBH <- - ACCPLAT : OK
    alt Quotas accepted
        GUI <- - - PUBH : Data
    else Quota exceeded
        GUI <- - - PUBH : Message: Quota exceeded
    end
else Rejected
    PUBH <- - ACCPLAT : Fail
    GUI <- - - PUBH : Error
end

@enduml

PlantUML version 1.2019.05(Sat Apr 20 16:45:36 GMT 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_202-b08
Operating System: Linux
OS Version: 5.0.0-1020-azure
Default Encoding: ANSI_X3.4-1968
Language: en
Country: US
--></g></svg>